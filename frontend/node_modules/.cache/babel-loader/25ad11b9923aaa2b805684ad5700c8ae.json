{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelRadio as _vModelRadio, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-47c45a2c\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"checkout-container\"\n};\nconst _hoisted_2 = {\n  class: \"checkout-form-container\"\n};\nconst _hoisted_3 = {\n  class: \"checkout-heading\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, [/*#__PURE__*/_createTextVNode(\"Еще несколько шагов, чтобы оформить заказ\"), /*#__PURE__*/_createElementVNode(\"span\", null, \"Стоимость\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  class: \"form-group details-group\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Shipping Details\", -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_12 = {\n  class: \"form-group details-group\"\n};\n\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Payment Method\", -1\n/* HOISTED */\n));\n\nconst _hoisted_14 = {\n  class: \"form-group\"\n};\nconst _hoisted_15 = {\n  class: \"form-group\"\n};\n\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Cash\", -1\n/* HOISTED */\n));\n\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Card (Visa)\", -1\n/* HOISTED */\n));\n\nconst _hoisted_18 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_19 = {\n  key: 0\n};\nconst _hoisted_20 = {\n  class: \"form-group\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_22 = {\n  class: \"form-group\"\n};\nconst _hoisted_23 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_24 = {\n  class: \"form-group\"\n};\nconst _hoisted_25 = {\n  class: \"form-control\"\n};\n\nconst _hoisted_26 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \"1.6rem\",\n    \"position\": \"absolute\",\n    \"margin-left\": \"-5px\",\n    \"margin-top\": \"-11px\"\n  }\n}, \"Expiry Date: \", -1\n/* HOISTED */\n));\n\nconst _hoisted_27 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_28 = {\n  class: \"form-group\"\n};\nconst _hoisted_29 = {\n  key: 0,\n  class: \"error-mess\"\n};\nconst _hoisted_30 = {\n  key: 0,\n  class: \"form-group\"\n};\nconst _hoisted_31 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n    id: \"checkoutForm\",\n    onSubmit: _cache[9] || (_cache[9] = (...args) => $options.handleSubmit && $options.handleSubmit(...args)),\n    novalidate: \"\",\n    autocomplete: \"off\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _ctx.user ? (_openBlock(), _createElementBlock(\"h3\", _hoisted_5, [_createTextVNode(_toDisplayString(_ctx.user.user_name) + \"'s Order\", 1\n  /* TEXT */\n  ), _createElementVNode(\"span\", null, \"₽\" + _toDisplayString($options.calculateSummaryPrice()[3]), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coPhone\",\n    id: \"coPhone\",\n    placeholder: \"Phone number\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.checkoutObj.phone = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.checkoutObj.phone]]), $data.errorObj.phoneErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, _toDisplayString($data.errorObj.phoneErr[0]), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coAddress\",\n    id: \"coAddress\",\n    placeholder: \"Address in Hanoi, Vietnam\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.checkoutObj.address = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.checkoutObj.address]]), $data.errorObj.addressErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, _toDisplayString($data.errorObj.addressErr[0]), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_12, [_hoisted_13, _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"radio\",\n    name: \"payment\",\n    value: \"cash\",\n    id: \"paymentCash\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.checkoutObj.paymentMethod = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelRadio, $data.checkoutObj.paymentMethod]]), _hoisted_16, _withDirectives(_createElementVNode(\"input\", {\n    type: \"radio\",\n    name: \"payment\",\n    value: \"card\",\n    id: \"paymentCard\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.checkoutObj.paymentMethod = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelRadio, $data.checkoutObj.paymentMethod]]), _hoisted_17]), $data.errorObj.payErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_18, _toDisplayString($data.errorObj.payErr[0]), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)]), $data.checkoutObj.paymentMethod == 'card' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coCardNum\",\n    placeholder: \"Enter your card number\",\n    id: \"coCardNum\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.cardObj.number = $event),\n    size: \"16\",\n    maxlength: \"16\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.cardObj.number]]), $data.errorObj.numErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_21, _toDisplayString($data.errorObj.numErr[0]), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_22, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coCardName\",\n    placeholder: \"Enter the name in your card \",\n    id: \"coCardName\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.cardObj.name = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[$setup[\"vUpcase\"]], [_vModelText, $data.cardObj.name]]), $data.errorObj.nameErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_23, _toDisplayString($data.errorObj.nameErr[0]), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"div\", _hoisted_25, [_hoisted_26, _withDirectives(_createElementVNode(\"input\", {\n    style: {\n      \"position\": \"absolute\",\n      \"margin-left\": \"100px\",\n      \"margin-top\": \"-12px\",\n      \"background\": \"inherit\"\n    },\n    type: \"month\",\n    name: \"coCardEx\",\n    id: \"coCardEx\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.cardObj.expiryDate = $event),\n    onClick: _cache[7] || (_cache[7] = $event => $options.availableTime())\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.cardObj.expiryDate]])]), $data.errorObj.exDateErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_27, _toDisplayString($data.errorObj.exDateErr[0]), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_28, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"coCardCvv\",\n    placeholder: \"CVV\",\n    id: \"coCardCvv\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.cardObj.cvv = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.cardObj.cvv]]), $data.errorObj.cvvErr.length > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_29, _toDisplayString($data.errorObj.cvvErr[0]), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true)]), _ctx.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createElementVNode(\"input\", {\n    type: \"submit\",\n    value: \"CONFIRM & PAY\",\n    class: \"btn\",\n    disabled: $options.filterFoods.length ? false : true\n  }, null, 8\n  /* PROPS */\n  , _hoisted_31)])) : _createCommentVNode(\"v-if\", true)], 32\n  /* HYDRATE_EVENTS */\n  )])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","_createElementBlock","id","onSubmit","$options","novalidate","autocomplete","_hoisted_4","_ctx","_hoisted_5","user_name","_toDisplayString","_hoisted_7","type","name","placeholder","$data","phone","$event","phoneErr","length","address","addressErr","_hoisted_13","value","paymentMethod","_hoisted_16","_hoisted_17","payErr","_hoisted_19","number","size","maxlength","numErr","nameErr","_hoisted_26","expiryDate","onClick","exDateErr","cvv","cvvErr","disabled"],"sourceRoot":"","sources":["C:\\Users\\User\\Desktop\\restaurant-ordering-system-master\\frontend\\src\\pages\\Checkout.vue"],"sourcesContent":["<template>\n  <div class=\"checkout-container\">\n    <div class=\"checkout-form-container\">\n      <form\n        id=\"checkoutForm\"\n        @submit=\"handleSubmit\"\n        novalidate\n        autocomplete=\"off\"\n      >\n        <div class=\"checkout-heading\">\n          <h3>Еще несколько шагов, чтобы оформить заказ<span>Стоимость</span></h3>\n          <h3 v-if=\"user\">\n            {{ user.user_name }}'s Order<span\n              >₽{{ calculateSummaryPrice()[3] }}</span\n            >\n          </h3>\n        </div>\n\n        <div class=\"form-group details-group\">\n          <h4>Shipping Details</h4>\n          <div class=\"form-group\">\n            <input\n              type=\"text\"\n              name=\"coPhone\"\n              id=\"coPhone\"\n              placeholder=\"Phone number\"\n              class=\"form-control\"\n              v-model=\"checkoutObj.phone\"\n            />\n            <p class=\"error-mess\" v-if=\"errorObj.phoneErr.length > 0\">\n              {{ errorObj.phoneErr[0] }}\n            </p>\n          </div>\n\n          <div class=\"form-group\">\n            <input\n              type=\"text\"\n              name=\"coAddress\"\n              id=\"coAddress\"\n              placeholder=\"Address in Hanoi, Vietnam\"\n              class=\"form-control\"\n              v-model=\"checkoutObj.address\"\n            />\n            <p class=\"error-mess\" v-if=\"errorObj.addressErr.length > 0\">\n              {{ errorObj.addressErr[0] }}\n            </p>\n          </div>\n        </div>\n\n        <div class=\"form-group details-group\">\n          <h4>Payment Method</h4>\n          <div class=\"form-group\">\n            <div class=\"form-group\">\n              <input\n                type=\"radio\"\n                name=\"payment\"\n                value=\"cash\"\n                id=\"paymentCash\"\n                v-model=\"checkoutObj.paymentMethod\"\n              /><span>Cash</span>\n              <input\n                type=\"radio\"\n                name=\"payment\"\n                value=\"card\"\n                id=\"paymentCard\"\n                v-model=\"checkoutObj.paymentMethod\"\n              /><span>Card (Visa)</span>\n            </div>\n            <p class=\"error-mess\" v-if=\"errorObj.payErr.length > 0\">\n              {{ errorObj.payErr[0] }}\n            </p>\n          </div>\n\n          <div v-if=\"checkoutObj.paymentMethod == 'card'\">\n            <div class=\"form-group\">\n              <input\n                type=\"text\"\n                name=\"coCardNum\"\n                placeholder=\"Enter your card number\"\n                id=\"coCardNum\"\n                class=\"form-control\"\n                v-model=\"cardObj.number\"\n                size=\"16\"\n                maxlength=\"16\"\n              />\n              <p class=\"error-mess\" v-if=\"errorObj.numErr.length > 0\">\n                {{ errorObj.numErr[0] }}\n              </p>\n            </div>\n\n            <div class=\"form-group\">\n              <input\n                v-upcase\n                type=\"text\"\n                name=\"coCardName\"\n                placeholder=\"Enter the name in your card \"\n                id=\"coCardName\"\n                class=\"form-control\"\n                v-model=\"cardObj.name\"\n              />\n              <p class=\"error-mess\" v-if=\"errorObj.nameErr.length > 0\">\n                {{ errorObj.nameErr[0] }}\n              </p>\n            </div>\n\n            <div class=\"form-group\">\n              <div class=\"form-control\">\n                <span\n                  style=\"\n                    font-size: 1.6rem;\n                    position: absolute;\n                    margin-left: -5px;\n                    margin-top: -11px;\n                  \"\n                  >Expiry Date:\n                </span>\n                <input\n                  style=\"\n                    position: absolute;\n                    margin-left: 100px;\n                    margin-top: -12px;\n                    background: inherit;\n                  \"\n                  type=\"month\"\n                  name=\"coCardEx\"\n                  id=\"coCardEx\"\n                  v-model=\"cardObj.expiryDate\"\n                  @click=\"availableTime()\"\n                />\n              </div>\n              <p class=\"error-mess\" v-if=\"errorObj.exDateErr.length > 0\">\n                {{ errorObj.exDateErr[0] }}\n              </p>\n            </div>\n\n            <div class=\"form-group\">\n              <input\n                type=\"text\"\n                name=\"coCardCvv\"\n                placeholder=\"CVV\"\n                id=\"coCardCvv\"\n                class=\"form-control\"\n                v-model=\"cardObj.cvv\"\n              />\n              <p class=\"error-mess\" v-if=\"errorObj.cvvErr.length > 0\">\n                {{ errorObj.cvvErr[0] }}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div v-if=\"user\" class=\"form-group\">\n          <input\n            type=\"submit\"\n            value=\"CONFIRM & PAY\"\n            class=\"btn\"\n            :disabled=\"filterFoods.length ? false : true\"\n          />\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Checkout\",\n\n  data() {\n    return {\n      checkoutObj: { phone: \"\", address: \"\", paymentMethod: \"\" },\n      cardObj: { number: \"\", name: \"\", expiryDate: \"\", cvv: \"\" },\n      errorObj: {\n        phoneErr: [],\n        addressErr: [],\n        payErr: [],\n        numErr: [],\n        nameErr: [],\n        exDateErr: [],\n        cvvErr: [],\n      },\n      cartItem: [],\n      itemQuantity: [],\n    };\n  },\n\n  created() {\n    this.getAllCartItem();\n  },\n\n  computed: {\n    ...mapState([\"allFoods\", \"user\"]),\n\n    filterFoods: function () {\n      return this.allFoods.filter((f) => this.matchID(f, this.cartItem));\n    },\n  },\n\n  methods: {\n    availableTime: function () {\n      var now = new Date();\n      var currentMonth = (\"0\" + (now.getMonth() + 1)).slice(-2);\n\n      var minRange = now.getFullYear() + \"-\" + currentMonth;\n      var maxRange = now.getFullYear() + 10 + \"-\" + currentMonth;\n\n      document.getElementById(\"coCardEx\").setAttribute(\"min\", minRange);\n      document.getElementById(\"coCardEx\").setAttribute(\"max\", maxRange);\n    },\n\n    matchID: function (food, cartArray) {\n      let temp = \"\";\n      cartArray.forEach((element) => {\n        if (parseInt(food.food_id) == element) {\n          temp = food;\n        }\n      });\n      return temp;\n    },\n\n    calculateSummaryPrice: function () {\n      let subtotal = 0;\n      let discount = 0;\n      let delivery = 15;\n      let i = 0;\n      while (i < this.itemQuantity.length) {\n        subtotal =\n          subtotal +\n          parseInt(this.filterFoods[i].food_price) * this.itemQuantity[i];\n        discount =\n          discount +\n          parseInt(this.filterFoods[i].food_discount) * this.itemQuantity[i];\n        i = i + 1;\n      }\n      if (!this.filterFoods.length) {\n        delivery = 0;\n      }\n      let total = subtotal - discount + delivery;\n      return [subtotal, discount, delivery, total];\n    },\n\n    async getAllCartItem() {\n      if (this.user) {\n        let existItem = await axios.get(\"/cartItem/\" + this.user.user_id);\n        existItem.data.forEach((element) => {\n          this.cartItem.push(element.food_id);\n          this.itemQuantity.push(element.item_qty);\n        });\n      }\n    },\n\n    resetCheckErr: function () {\n      this.errorObj.phoneErr = [];\n      this.errorObj.addressErr = [];\n      this.errorObj.payErr = [];\n      this.errorObj.numErr = [];\n      this.errorObj.nameErr = [];\n      this.errorObj.exDateErr = [];\n      this.errorObj.cvvErr = [];\n    },\n\n    checkEmptyErr: function () {\n      for (var typeErr in this.errorObj) {\n        if (this.errorObj[typeErr].length != 0) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    inputUpcase: function (e) {\n      e.target.value = e.target.value.toUpperCase();\n    },\n\n    checkForm: function () {\n      this.resetCheckErr();\n\n      // Phone validate\n      if (!this.checkoutObj.phone) {\n        this.errorObj.phoneErr.push(\"Entering phone number is required\");\n      } else {\n        if (!this.checkoutObj.phone.startsWith(\"7\")) {\n          this.errorObj.phoneErr.push(\"Номер телефона должен начинаться с 7\");\n        }\n\n        if (this.checkoutObj.phone.length != 11) {\n          this.errorObj.phoneErr.push(\n            \"Phone numbers must have exactly 11 digits\"\n          );\n        }\n\n        if (!/[0-9]{11}/.test(this.checkoutObj.phone)) {\n          this.errorObj.phoneErr.push(\"Phone numbers can only contain numbers\");\n        }\n      }\n\n      // Address validate\n      if (!this.checkoutObj.address) {\n        this.errorObj.addressErr.push(\"Entering address is required\");\n      }\n\n      // Card validate\n      if (!this.checkoutObj.paymentMethod) {\n        this.errorObj.payErr.push(\"Selecting payment method is required\");\n      } else if (this.checkoutObj.paymentMethod == \"card\") {\n        if (!this.cardObj.number) {\n          this.errorObj.numErr.push(\"Entering card number is required\");\n        } else {\n          if (!this.cardObj.number.startsWith(\"4\")) {\n            this.errorObj.numErr.push(\"Visa card numbers must start with 4\");\n          }\n\n          if (this.cardObj.number.length != 16) {\n            this.errorObj.numErr.push(\n              \"Visa card numbers must have exactly 16 digits\"\n            );\n          }\n\n          if (!/[0-9]{16}/.test(this.cardObj.number)) {\n            this.errorObj.numErr.push(\n              \"Visa card numbers can only contain numbers\"\n            );\n          }\n        }\n\n        if (!this.cardObj.name) {\n          this.errorObj.nameErr.push(\"Entering name is required\");\n        } else {\n          if (!/^[A-Za-z]+$/.test(this.cardObj.name.replace(/\\s/g, \"\"))) {\n            this.errorObj.nameErr.push(\"A name can only contain letters\");\n          }\n        }\n\n        if (!this.cardObj.expiryDate) {\n          this.errorObj.exDateErr.push(\"Entering expiry date is required\");\n        }\n\n        if (!this.cardObj.cvv) {\n          this.errorObj.cvvErr.push(\"Entering cvv code is required\");\n        } else {\n          if (this.cardObj.cvv.length != 3) {\n            this.errorObj.cvvErr.push(\"Cvv code must have exactly 3 digits\");\n          }\n\n          if (!/[0-9]{3}/.test(this.cardObj.cvv)) {\n            this.errorObj.cvvErr.push(\"Cvv code can only contain numbers\");\n          }\n        }\n      } else if (this.checkoutObj.paymentMethod == \"cash\") {\n        this.cardObj.number = \"\";\n        this.cardObj.name = \"\";\n        this.cardObj.expiryDate = \"\";\n        this.cardObj.cvv = \"\";\n\n        this.errorObj.numErr = [];\n        this.errorObj.nameErr = [];\n        this.errorObj.exDateErr = [];\n        this.errorObj.cvvErr = [];\n      }\n    },\n\n    isPaid: function () {\n      if (this.checkoutObj.paymentMethod == \"cash\") {\n        return \"false\";\n      } else if (this.checkoutObj.paymentMethod == \"card\") {\n        return \"true\";\n      }\n    },\n\n    async sendBillDetails(billId, foodId, qty) {\n      let billDetails = {\n        bill_id: parseInt(billId),\n        food_id: parseInt(foodId),\n        item_qty: parseInt(qty),\n      };\n\n      await axios.post(\"/billdetails\", billDetails);\n    },\n\n    async handleSubmit(e) {\n      this.checkForm();\n\n      if (!this.checkEmptyErr()) {\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n        let billId = (await axios.get(\"/billstatus/new\")).data;\n\n        if (billId == \"\") {\n          billId = 1;\n        } else {\n          billId = parseInt(billId.bill_id) + 1;\n        }\n\n        this.cartItem.forEach((foodId, index) => {\n          this.sendBillDetails(billId, foodId, this.itemQuantity[index]);\n        });\n\n        var now = new Date();\n        var day = (\"0\" + now.getDate()).slice(-2);\n        var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n        var hour = (\"0\" + now.getHours()).slice(-2);\n        var min = (\"0\" + now.getMinutes()).slice(-2);\n        var currentTime =\n          now.getFullYear() + \"-\" + month + \"-\" + day + \"T\" + hour + \":\" + min;\n\n        let billStatus = {\n          bill_id: parseInt(billId),\n          user_id: parseInt(this.user.user_id),\n          bill_phone: this.checkoutObj.phone,\n          bill_address: this.checkoutObj.address,\n          bill_when: currentTime,\n          bill_method: this.checkoutObj.paymentMethod,\n          bill_discount: parseInt(this.calculateSummaryPrice()[1]),\n          bill_delivery: parseInt(this.calculateSummaryPrice()[2]),\n          bill_total: parseInt(this.calculateSummaryPrice()[3]),\n          bill_paid: this.isPaid(),\n          bill_status: 1,\n        };\n\n        axios.post(\"/billstatus\", billStatus);\n        axios.delete(\"/cartItem/\" + this.user.user_id);\n\n        this.cartItem = [];\n        this.itemQuantity = [];\n\n        this.$router.push(\"/thank\");\n      }\n    },\n  },\n};\n</script>\n\n<script setup>\n// enables v-focus in templates\nconst vUpcase = {\n  mounted(el) {\n    el.style.textTransform = \"uppercase\";\n  },\n};\n</script>\n\n<style scoped>\n.checkout-container {\n  padding: 2rem 9%;\n}\n\n.checkout-container .checkout-form-container {\n  background: #fff;\n  height: 90vh;\n}\n\n.checkout-container .checkout-form-container form {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -42%);\n  max-width: 70rem;\n  width: 100%;\n  box-shadow: 0 1rem 1rem rgba(0, 0, 0, 0.05);\n  border: 0.1rem solid rgba(0, 0, 0, 0.2);\n  padding: 2rem;\n  border-radius: 0.5rem;\n  animation: fadeUp 0.4s linear;\n}\n\n.checkout-container .checkout-form-container form h3 {\n  padding-bottom: 1rem;\n  font-size: 2rem;\n  text-transform: uppercase;\n  color: #130f40;\n  margin: 0;\n}\n\n.checkout-container .checkout-form-container form .form-control {\n  margin: 0.7rem 0;\n  border-radius: 0.5rem;\n  background: #f7f7f7;\n  padding: 2rem 1.2rem;\n  font-size: 1.6rem;\n  color: #130f40;\n  text-transform: none;\n  width: 100%;\n  border: none;\n}\n\n.checkout-container .checkout-form-container form label {\n  font-size: 2rem;\n  margin: 0;\n  padding: 0;\n}\n\n.checkout-container .checkout-form-container form span {\n  font-size: 18px;\n  padding-left: 5px;\n  padding-right: 40px;\n}\n\n.checkout-container .checkout-form-container form .btn {\n  margin: 1rem 0;\n  width: 100%;\n  text-align: center;\n}\n\n.checkout-container .checkout-form-container form p {\n  padding-top: 1rem;\n  font-size: 1.5rem;\n  color: #666;\n  margin: 0;\n}\n\n.checkout-container .checkout-form-container form p a {\n  color: #27ae60;\n}\n\n.checkout-container .checkout-form-container form p a:hover {\n  color: #130f40;\n  text-decoration: underline;\n}\n\n.checkout-container .checkout-form-container form .form-group {\n  margin: 0;\n}\n\n.checkout-container .checkout-form-container form .form-group.details-group {\n  margin-top: 40px;\n}\n\n.checkout-container .checkout-form-container form .form-group .error-mess {\n  font-size: 1.5rem;\n  position: relative;\n  color: rgb(243, 47, 47);\n  margin: 0;\n  padding: 0;\n}\n\n.checkout-container .checkout-form-container form .checkout-heading h3 {\n  display: flex;\n  justify-content: space-between;\n}\n\n.checkout-container .checkout-form-container form .checkout-heading h3 span {\n  padding-right: 0px;\n  color: #f38609;\n}\n\n.checkout-container\n  .checkout-form-container\n  form\n  .checkout-heading\n  h3:first-of-type\n  span {\n  padding-right: 0px;\n  color: #130f40;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}