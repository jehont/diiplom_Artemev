{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a1ada2a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"admin-container\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Приветствую администратора\", -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_5 = {\n  class: \"table colored-header datatable project-list\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Идентификатор счета\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Номер пользователя \"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Телефон\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Адрес\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Время заказа\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Оплата\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Сумма\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Статус\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Действие\")])], -1\n/* HOISTED */\n));\n\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"button\", {\n    class: \"btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.handleLogout())\n  }, \"Выйти\")]), _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" PROJECT TABLE \"), _createElementVNode(\"table\", _hoisted_5, [_hoisted_6, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filterBills.slice().reverse(), b => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: b.bill_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(b.bill_id), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.user_id), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_phone), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_address), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_when), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_paid), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, \"₽\" + _toDisplayString(b.bill_total), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString($data.avaiableStatus[b.bill_status]), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, [b.bill_status < 5 ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      class: \"action-btn\",\n      onClick: $event => $options.nextStatusBtn(b.bill_id)\n    }, _toDisplayString($data.avaiableStatus[b.bill_status + 1]), 9\n    /* TEXT, PROPS */\n    , _hoisted_7)) : _createCommentVNode(\"v-if\", true), b.bill_status == 1 ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      class: \"cancel-btn\",\n      onClick: $event => $options.cancelBtn(b.bill_id)\n    }, \" Отмена \", 8\n    /* PROPS */\n    , _hoisted_8)) : b.bill_status == 5 && b.bill_paid == 'false' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      class: \"paid-btn\",\n      onClick: $event => $options.paidBtn(b.bill_id)\n    }, \" оплачено \", 8\n    /* PROPS */\n    , _hoisted_9)) : b.bill_status == 5 && b.bill_paid == 'true' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 3,\n      class: \"action-btn\",\n      onClick: $event => $options.nextStatusBtn(b.bill_id)\n    }, _toDisplayString($data.avaiableStatus[b.bill_status + 1]), 9\n    /* TEXT, PROPS */\n    , _hoisted_10)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createElementBlock","_hoisted_3","onClick","$options","_createCommentVNode","_hoisted_6","_Fragment","_renderList","slice","reverse","b","key","bill_id","_toDisplayString","user_id","bill_phone","bill_address","bill_when","bill_paid","bill_total","$data","bill_status","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10"],"sourceRoot":"","sources":["C:\\Users\\User\\Desktop\\restaurant-ordering-system-master\\frontend\\src\\admin\\Dashboard.vue"],"sourcesContent":["<template>\n  <div class=\"admin-container\">\n    <div class=\"d-flex justify-content-between\">\n      <h1>Приветствую администратора</h1>\n      <button class=\"btn\" @click=\"handleLogout()\">Выйти</button>\n    </div>\n\n    <div class=\"table-responsive\">\n      <!-- PROJECT TABLE -->\n      <table class=\"table colored-header datatable project-list\">\n        <thead>\n          <tr>\n            <th>Идентификатор счета</th>\n            <th>Номер пользователя </th>\n            <th>Телефон</th>\n            <th>Адрес</th>\n            <th>Время заказа</th>\n            <th>Оплата</th>\n            <th>Сумма</th>\n            <th>Статус</th>\n            <th>Действие</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"b in filterBills.slice().reverse()\" :key=\"b.bill_id\">\n            <td>{{ b.bill_id }}</td>\n            <td>{{ b.user_id }}</td>\n            <td>{{ b.bill_phone }}</td>\n            <td>{{ b.bill_address }}</td>\n            <td>{{ b.bill_when }}</td>\n            <td>{{b.bill_paid }}</td>\n            <td>₽{{ b.bill_total }}</td>\n            <td>{{ avaiableStatus[b.bill_status] }}</td>\n            <td>\n              <button\n                v-if=\"b.bill_status < 5\"\n                class=\"action-btn\"\n                @click=\"nextStatusBtn(b.bill_id)\"\n              >\n                {{ avaiableStatus[b.bill_status + 1] }}\n              </button>\n\n              <button\n                v-if=\"b.bill_status == 1\"\n                class=\"cancel-btn\"\n                @click=\"cancelBtn(b.bill_id)\"\n              >\n                Отмена\n              </button>\n\n              <button\n                v-else-if=\"b.bill_status == 5 && b.bill_paid == 'false'\"\n                class=\"paid-btn\"\n                @click=\"paidBtn(b.bill_id)\"\n              >\n                оплачено\n              </button>\n\n              <button\n                v-else-if=\"b.bill_status == 5 && b.bill_paid == 'true'\"\n                class=\"action-btn\"\n                @click=\"nextStatusBtn(b.bill_id)\"\n              >\n                {{ avaiableStatus[b.bill_status + 1] }}\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { mapState, mapMutations } from \"vuex\";\nexport default {\n  name: \"Dashboard\",\n\n  data() {\n    return {\n      avaiableStatus: [\n        \"Отменен\",\n        \"Подтвержден\",\n        \"Готовится\",\n        \"Проверяется\",\n        \"Едет к вам\",\n        \"Доставлено\",\n        \"Завершен\",\n      ],\n      allBills: [],\n      showOrderDetails: false,\n      sendId: undefined,\n      interval: \"\",\n    };\n  },\n\n  created() {\n    this.getAllBills();\n    if (!this.admin) {\n      this.$router.push(\"/\");\n    }\n  },\n\n  mounted: function () {\n    this.autoUpdate();\n  },\n\n  beforeUnmount() {\n    clearInterval(this.interval);\n  },\n\n  computed: {\n    ...mapState([\"allFoods\", \"admin\"]),\n\n    filterBills: function () {\n      return this.allBills.filter(\n        (b) => b.bill_status < 6 && b.bill_status > 0\n      );\n    },\n  },\n\n  methods: {\n    ...mapMutations([\"setAdmin\"]),\n\n    async getAllBills() {\n      this.allBills = (await axios.get(\"/billstatus\")).data;\n    },\n\n    sendBillId: function (id) {\n      this.sendId = id;\n      this.showOrderDetails = !this.showOrderDetails;\n    },\n\n    closeView: function () {\n      this.showOrderDetails = !this.showOrderDetails;\n    },\n\n    handleLogout: function () {\n      this.setAdmin(\"\");\n    },\n\n    async nextStatusBtn(id) {\n      await axios.put(\"/billstatus/\" + id);\n      this.getAllBills();\n    },\n\n    async paidBtn(id) {\n      await axios.put(\"/billstatus/paid/\" + id);\n      this.getAllBills();\n    },\n\n    async cancelBtn(id) {\n      await axios.put(\"/billstatus/cancel/\" + id);\n      this.getAllBills();\n    },\n\n    autoUpdate: function () {\n      this.interval = setInterval(\n        function () {\n          this.getAllBills();\n        }.bind(this),\n        1000\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n.admin-container {\n  background-color: #fff;\n  height: 100vh;\n  padding: 2rem 9%;\n  font-size: 16px;\n}\n\n.project-list > tbody > tr > td {\n  padding: 12px 8px;\n}\n\n.project-list > tbody > tr > td .avatar {\n  width: 22px;\n  border: 1px solid #ccc;\n}\n\n.table-responsive {\n  margin-top: 8vh;\n}\n\n.action-btn,\n.cancel-btn,\n.paid-btn {\n  width: 100px;\n  height: 25px;\n  color: white;\n}\n\n.action-btn {\n  background-color: #0da9ef;\n  margin-right: 10px;\n}\n\n.cancel-btn,\n.paid-btn {\n  background-color: red;\n}\n\n.action-btn:hover {\n  background-color: #27ae60;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}